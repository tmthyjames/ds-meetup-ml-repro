schema: '2.0'
stages:
  lyrics-etl:
    cmd: reproml etl lyrics
    outs:
    - path: data/processed/lyrics
      md5: bdef894226974698cb0745fff57fe54b.dir
      size: 18091467
      nfiles: 37
    - path: data/raw/lyrics/lyrics_whole.csv.zip
      md5: a9e618c5b49032cc096d163b68966ecb
      size: 10738951
  get-lyrics:
    cmd: reproml etl get-lyrics
    deps:
    - path: reproml/etl/lyrics/_lyrics.py
      md5: 7ab85d700a6eb85bca6da504353a0e43
      size: 377
    outs:
    - path: data/raw/lyrics/
      md5: d07c4d5e01e14de395b2185fdb828e63.dir
      size: 89409295
      nfiles: 2
  prepro-lyrics:
    cmd: reproml prepro process
    deps:
    - path: data/raw/lyrics/
      md5: d07c4d5e01e14de395b2185fdb828e63.dir
      size: 89409295
      nfiles: 2
    - path: reproml/preprocess/_preprocess.py
      md5: 32a74b137d42a7b76d6982ac09187289
      size: 1799
    outs:
    - path: data/processed/lyrics
      md5: f3b09e9716d88f3efad77b639a78b6c0.dir
      size: 69960076
      nfiles: 83
  split-lyrics:
    cmd: reproml prepro split
    deps:
    - path: data/processed/lyrics/
      md5: f3b09e9716d88f3efad77b639a78b6c0.dir
      size: 69960076
      nfiles: 83
    - path: reproml/preprocess/_preprocess.py
      md5: 32a74b137d42a7b76d6982ac09187289
      size: 1799
    outs:
    - path: data/modeling/test_set.parquet
      md5: 97ddb233c0cdbae365f072d7273c4f69
      size: 14674937
    - path: data/modeling/train_set.parquet
      md5: 5f585fef44bf6a78dc9077ab79f66de3
      size: 54934716
  train-model:
    cmd: reproml ml train
    deps:
    - path: data/modeling/train_set.parquet
      md5: 5f585fef44bf6a78dc9077ab79f66de3
      size: 54934716
    - path: reproml/ml/_ml.py
      md5: e46921d023fda00c15ba40b5aa1bcf6d
      size: 698
    outs:
    - path: model_artifacts/model.pkl
      md5: 4081c97f4d24d870b099bb807c128033
      size: 17770966
  validate-model:
    cmd: reproml validate metrics
    deps:
    - path: model_artifacts/model.pkl
      md5: 4081c97f4d24d870b099bb807c128033
      size: 17770966
    outs:
    - path: data/metrics/performance.json
      md5: 325903bf91247379dde3924827f7e4a3
      size: 128
